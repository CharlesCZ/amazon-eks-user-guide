# Assigning IPv6 addresses to pods and services<a name="cni-ipv6"></a>

By default, Kubernetes assigns IPv4 addresses to your pods and services\. Instead of assigning IPv4 addresses to your pods and services, you can configure your cluster to assign IPv6 addresses to them\. Amazon EKS doesn't support dual\-stacked pods or services\. As a result, you can't assign both IPv4 and IPv6 addresses to your pods and services\. 

You select which IP family you want to use for your cluster when you create it\. You can't change the family after you create the cluster\.

**Considerations for using the IPv6 family for your cluster:**
+ You must create a new cluster that's version 1\.21 or later and specify that you want to use the IPv6 family for that cluster\. You can't enable the IPv6 family for a cluster that you updated from a previous version\. For instructions on how to create a new cluster, see [Creating an Amazon EKS cluster](create-cluster.md)\.
+ The version of the Amazon VPC CNI add\-on that you deploy to your cluster must be version 1\.10\.1 or later\. This version or later is deployed by default with a new 1\.21 or later cluster\. After you deploy the add\-on, you can't downgrade your Amazon VPC CNI add\-on to a version lower than 1\.10\.1 without first removing all nodes in all node groups in your cluster\.
+ Windows pods and services aren't supported\.
+ If you use Amazon EC2 nodes, you must configure the Amazon VPC CNI add\-on with IP prefix delegation and IPv6\. If you choose the IPv6 family when creating your cluster, the 1\.10\.1 version of the add\-on defaults to this configuration\. This is the case for both a self\-managed or Amazon EKS add\-on\. For more information about IP prefix delegation, see [Increase the amount of available IP addresses for your Amazon EC2 nodes](cni-increase-ip-addresses.md)\.
+ When you create a cluster, the VPC and subnets that you specify must have an IPv6 CIDR block that's assigned to the VPC and subnets that you specify\. They must also have an IPv4 CIDR block assigned to them\. This is because, even if you only want to use IPv6, a VPC still requires an IPv4 CIDR block to function\. For more information, see [Associate an IPv6 CIDR block with your VPC](https://docs.aws.amazon.com/vpc/latest/userguide/working-with-vpcs.html#vpc-associate-ipv6-cidr) in the Amazon VPC User Guide\.
+ When you create your cluster and nodes, you must specify subnets that are configured to auto\-assign IPv6 addresses\. Otherwise, you can't deploy your cluster and nodes\. By default, this configuration is disabled\. For more information, see [Modify the IPv6 addressing attribute for your subnet](https://docs.aws.amazon.com/vpc/latest/userguide/vpc-ip-addressing.html#subnet-ipv6) in the Amazon VPC User Guide\.
+ The route tables that are assigned to your subnets must have routes for IPv6 addresses\. For more information, see [Migrate to IPv6](https://docs.aws.amazon.com/vpc/latest/userguide/vpc-migrate-ipv6.html) in the Amazon VPC User Guide\.
+ Your security groups must allow IPv6 addresses\. For more information, see [Migrate to IPv6](https://docs.aws.amazon.com/vpc/latest/userguide/vpc-migrate-ipv6.html) in the Amazon VPC User Guide\.
+ You can only use IPv6 with AWS Nitro\-based Amazon EC2 or Fargate nodes\.
+ You can't use IPv6 with [Security groups for pods](security-groups-for-pods.md) with Amazon EC2 nodes\. However, you can use it with Fargate nodes\. If you need separate security groups for individual pods, continue using the IPv4 family with Amazon EC2 nodes, or use Fargate nodes instead\.
+ If you previously used [custom networking](cni-custom-network.md) to help alleviate IP address exhaustion, you can use IPv6 instead\. You can't use custom networking with IPv6\. If you use custom networking for network isolation, then you might need to continue to use custom networking and the IPv4 family for your clusters\.
+ You can't use IPv6 with nodes that are deployed on AWS Outposts\.
+ Pods and services are only assigned an IPv6 address\. They aren't assigned an IPv4 address\. For traffic destined for outside the cluster, the VPC CNI add\-on translates a pod's source address to the primary private IPv4 address of the node\. If the traffic needs a public IP address, the traffic is then source network address translated to a public IP\. For more information, see [External source network address translation \(SNAT\)](external-snat.md)\. We don't recommend that you use the [NAT64 or DNS64 capabilities](https://docs.aws.amazon.com/vpc/latest/userguide/vpc-nat-gateway.html#nat-gateway-nat64-dns64) of a NAT gateway\. Amazon VPC supports them, but pods and services that run on Amazon EKS clusters can't use them\.
+ The source IPv6 address of a pod isn't source network address translated to the IPv6 address of the node when communicating outside of the VPC\. It is routed using an internet gateway or egress\-only internet gateway\.
+ All nodes are assigned an IPv4 and IPv6 address\.
+ You can use version 2\.3\.1 or later of the AWS Load Balancer Controller to load balance [application](alb-ingress.md) or [network](network-load-balancing.md) traffic to IPv6 pods in IP mode, but not instance mode\. For more information, see [AWS Load Balancer Controller](aws-load-balancer-controller.md)\.
+ You must attach an IPv6 IAM policy to your node IAM or CNI IAM role\. Between the two, we recommend that you attach it to a CNI IAM role\. For more information, see [Step 1: \(Optional\) Create IAM policy for IPv6](cni-iam-role.md#cni-iam-role-create-ipv6-policy) and [Step 2: Create the Amazon VPC CNI plugin IAM role](cni-iam-role.md#cni-iam-role-create-role)\.
+ Each Fargate pod receives an IPv6 address from the CIDR that's specified for the subnet that it's deployed in\. The underlying hardware unit that runs Fargate pods gets a unique IPv4 and IPv6 address from the CIDRs that are assigned to the subnet that the hardware unit is deployed in\.
+ We recommend that you perform a thorough evaluation of your applications, Amazon EKS add\-ons, and AWS services that you integrate with before deploying IPv6 clusters\. This is to ensure that everything works as expected with IPv6\.
+ You can't use IPv6 with AWS App Mesh\.

**Deploy an IPv6 cluster**  
For instructions on how to deploy an IPv6 cluster, see [Creating an Amazon EKS cluster](create-cluster.md)\.