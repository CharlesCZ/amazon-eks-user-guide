# `Dockershim` deprecation<a name="dockershim-deprecation"></a>

Kubernetes has deprecated `Dockershim` support, so Amazon EKS is ending support starting with the Kubernetes version 1\.22 launch\. Officially published Amazon EKS AMIs will include `containerd` as the only runtime starting with version 1\.22\. At the time of writing, this is targeted for end of the first quarter of 2022\. Kurbernetes version 1\.17 thru 1\.21 use Docker as the default runtime, but have a bootstrap flag option that lets you test out your workloads on any supported cluster today with `containerd`\. For more information, see [Enable the `containerd` runtime bootstrap flag](eks-optimized-ami.md#containerd-bootstrap)\.

We'll continue to publish AMIs on Kubernetes version 1\.21 until the end of support date, as shown on the [Amazon EKS Kubernetes release calendar](kubernetes-versions.md#kubernetes-release-calendar)\. If you need more time to test your workloads on `containerd`, you can stay on version 1\.21 and still be fully supported\. But to upgrade official Amazon EKS AMIs to version 1\.22, make sure to validate that your workloads run on `containerd`\. 

If you want to upgrade to version 1\.22 or higher and still use `Dockershim`, you'll need to build your own AMI with Docker installed\. However, when Kubernetes removes `Dockershim` support, you'll have to make the move to `containerd` to remain on a supported version\. For more information, see [Don't Panic: Kubernetes and Docker](https://kubernetes.io/blog/2020/12/02/dont-panic-kubernetes-and-docker/) on the *Kubernetes Blog*\.

We made this decision and announcement back in July 2021, and the initial announcement of `Dockershim` deprecation in Kubernetes happened over a year ago\. The recent announcement from the Kubernetes project to extend the deprecation period of `Dockershim` for another version hasn't changed our plans\. A deprecated feature requires making plans to move away from the feature\.

The `containerd` runtime provides better performance and security, and it's the runtime we're standardizing on across Amazon EKS \(Fargate and Bottlerocket already use `containerd` only\)\. We believe `containerd` provides a better experience, and it minimizes the number of Amazon EKS AMI releases required to address `Dockershim` [Common Vulnerabilities and Exposures](https://cve.mitre.org/) \(CVEs\)\. As `Dockershim` already uses `containerd` internally, you may not need to make any changes\. However, there are some situations where changes may be required:
+ You will need to make changes for any application that mounts the Docker socket\. For example, building container images using a container will be impacted\. Many monitoring tools also mount the Docker socket, such as Datadog\. You may have to wait for updates or re\-deploy workloads for runtime monitoring\.
+ You may need to make changes for any application that's reliant on specific Docker settings\. For example, using `HTTPS_PROXY` can require changes\. For more information, see [dockerd](https://docs.docker.com/engine/reference/commandline/dockerd/) in the *Docker Docs*\.
+ If you're using the Amazon ECR credential helper to pull images, you will need to switch to the `kubelet` image credential provider\. For more information, see [Configure a kubelet image credential provider](https://kubernetes.io/docs/tasks/kubelet-credential-provider/kubelet-credential-provider/) in the Kubernetes documentation\.